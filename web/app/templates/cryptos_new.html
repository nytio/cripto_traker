{% extends "base.html" %}

{% block content %}
  <div class="ct-card p-4">
    <h1 class="h4 mb-3">Add crypto</h1>
    <form method="post" action="{{ url_for('cryptos.create_crypto') }}">
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
      <div class="mb-3">
        <label for="coingecko_id" class="form-label">CoinGecko ID</label>
        <input type="text" class="form-control" id="coingecko_id" name="coingecko_id" placeholder="bitcoin" pattern="[a-z0-9-]{2,50}" list="coingecko-list" required>
        <datalist id="coingecko-list">
          {% for crypto in existing_cryptos %}
            <option value="{{ crypto.coingecko_id }}">
              {{ crypto.name or crypto.coingecko_id }}{% if crypto.symbol %} ({{ crypto.symbol|upper }}){% endif %}
            </option>
          {% endfor %}
        </datalist>
        <div class="form-text">
          Pick an existing crypto or enter a new CoinGecko ID. New IDs load 365 days of history automatically.
        </div>
      </div>
      <div class="d-flex gap-2">
        <button type="submit" class="btn btn-sm btn-primary">Save</button>
        <a class="btn btn-sm btn-outline-secondary" href="{{ url_for('dashboard.index') }}">Cancel</a>
      </div>
    </form>
  </div>
{% endblock %}
